"use strict";(self.webpackChunkandon_frontend=self.webpackChunkandon_frontend||[]).push([[130],{6130:(T,R,i)=>{i.r(R),i.d(R,{RolesModule:()=>J});var g=i(6814),C=i(1303),y=i(1476),h=i(3566),e=i(5879),f=i(5861),r=i(6510),Z=i(7278);let d=(()=>{var t;class n{constructor(s){this.http=s}create(s){var a=this;return(0,f.Z)(function*(){return yield a.http.post(r.S.ROLES.BASE_ENDPOINT,s)})()}delete(s){var a=this;return(0,f.Z)(function*(){yield a.http.delete(r.S.ROLES.BY_ID(s))})()}findAll(){var s=this;return(0,f.Z)(function*(){return yield s.http.get(r.S.ROLES.BASE_ENDPOINT)})()}findAllFilters(s,a,p,v){var S=this;return(0,f.Z)(function*(){const $=r.S.ROLES.FILTERS(s,a,p,v);return yield S.http.get($)})()}}return(t=n).\u0275fac=function(s){return new(s||t)(e.LFG(Z.v))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),n})();var x=i(5683),A=i(2032),l=i(5195),u=i(617),c=i(5940),m=i(5313),F=i(9309);function D(t,n){1&t&&e._UZ(0,"mat-spinner")}function P(t,n){1&t&&(e.TgZ(0,"div",25),e._uU(1," Andon's API rate limit has been reached. It will be reset in one minute. "),e.qZA())}function L(t,n){if(1&t&&(e.TgZ(0,"div",22),e.YNc(1,D,1,0,"mat-spinner",23),e.YNc(2,P,2,0,"div",24),e.qZA()),2&t){const o=e.oxw();e.xp6(1),e.Q6J("ngIf",o.isLoadingResults),e.xp6(1),e.Q6J("ngIf",o.isRateLimitReached)}}function E(t,n){1&t&&(e.TgZ(0,"th",26),e._uU(1," Name "),e.qZA())}function M(t,n){if(1&t&&(e.TgZ(0,"td",27),e._uU(1),e.qZA()),2&t){const o=n.$implicit;e.xp6(1),e.hij(" ",o.name.slice(0,50),"... ")}}function N(t,n){1&t&&(e.TgZ(0,"th",28),e._uU(1," Created "),e.qZA())}function U(t,n){if(1&t&&(e.TgZ(0,"td",29)(1,"div",30)(2,"mat-icon",31),e._uU(3,"calendar_today"),e.qZA(),e._uU(4),e.ALo(5,"date"),e.qZA()()),2&t){const o=n.$implicit;e.xp6(4),e.hij(" ",e.lcZ(5,1,o.createdOn)," ")}}function Y(t,n){1&t&&e._UZ(0,"tr",32)}function I(t,n){1&t&&e._UZ(0,"tr",33)}const w=function(){return[1,2,3,100]},b=[{path:"",component:(()=>{var t;class n{constructor(s){this.rolesService=s,this.displayedColumns=["createdOn","name"],this.data=[],this.resultsLength=0,this.isLoadingResults=!0,this.isRateLimitReached=!1,this.paginator=Object.create(null),this.sort=Object.create(null)}ngAfterViewInit(){this.loadRoles(),this.sort.sortChange.subscribe(()=>{this.paginator.pageIndex=0,this.loadRoles()}),this.paginator.page.subscribe(()=>this.loadRoles())}loadRoles(){const s=this.paginator.pageIndex*this.paginator.pageSize,a=this.paginator.pageSize,p=this.sort.active,v=this.sort.direction;this.isLoadingResults=!0,this.rolesService.findAllFilters(s,a,p,v).then(S=>{this.data=S.rows,this.resultsLength=S.row_count,this.isLoadingResults=!1,this.isRateLimitReached=!1}).catch(()=>{this.isLoadingResults=!1,this.isRateLimitReached=!0,this.data=[]})}applyFilter(s){}}return(t=n).\u0275fac=function(s){return new(s||t)(e.Y36(d))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-roles"]],viewQuery:function(s,a){if(1&s&&(e.Gf(y.NW,5),e.Gf(h.YE,5)),2&s){let p;e.iGM(p=e.CRH())&&(a.paginator=p.first),e.iGM(p=e.CRH())&&(a.sort=p.first)}},decls:25,vars:9,consts:[[1,"cardWithShadow"],[1,"p-24"],[1,"row","justify-content-between","m-b-8"],[1,"col-sm-4","col-lg-4"],[1,"mat-body-1"],[1,"col-sm-4","col-lg-3"],["appearance","outline",1,"w-100","hide-hint",3,"appFieldPermissions"],["matInput","","placeholder","Ex. ium","placeholder","Search here",3,"keyup"],["input",""],[1,"example-container","m-t-30"],["class","example-loading-shade",4,"ngIf"],[1,"example-table-container","responsive-table"],["mat-table","","matSort","","matSortActive","createdOn","matSortDisableClear","","matSortDirection","desc",1,"example-table",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","","class","f-w-600 mat-subtitle-1 f-s-16",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","createdOn"],["mat-header-cell","","mat-sort-header","","disableClear","","class","f-w-600 mat-subtitle-1 f-s-16 p-l-0",4,"matHeaderCellDef"],["mat-cell","","class","p-l-0",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions"],[1,"example-loading-shade"],[4,"ngIf"],["class","example-rate-limit-reached",4,"ngIf"],[1,"example-rate-limit-reached"],["mat-header-cell","","mat-sort-header","",1,"f-w-600","mat-subtitle-1","f-s-16"],["mat-cell",""],["mat-header-cell","","mat-sort-header","","disableClear","",1,"f-w-600","mat-subtitle-1","f-s-16","p-l-0"],["mat-cell","",1,"p-l-0"],[1,"d-flex","align-items-center","gap-8"],[1,"text-sm"],["mat-header-row",""],["mat-row",""]],template:function(s,a){1&s&&(e.TgZ(0,"mat-card",0)(1,"mat-card-content",1)(2,"div",2)(3,"div",3)(4,"mat-card-title"),e._uU(5,"Roles"),e.qZA(),e.TgZ(6,"mat-card-subtitle",4),e._uU(7,"Lista de roles"),e.qZA()(),e.TgZ(8,"div",5)(9,"mat-form-field",6)(10,"input",7,8),e.NdJ("keyup",function(v){return a.applyFilter(v)}),e.qZA()()()(),e.TgZ(12,"div",9),e.YNc(13,L,3,2,"div",10),e.TgZ(14,"div",11)(15,"table",12),e.ynx(16,13),e.YNc(17,E,2,0,"th",14),e.YNc(18,M,2,1,"td",15),e.BQk(),e.ynx(19,16),e.YNc(20,N,2,0,"th",17),e.YNc(21,U,6,3,"td",18),e.BQk(),e.YNc(22,Y,1,0,"tr",19),e.YNc(23,I,1,0,"tr",20),e.qZA()(),e._UZ(24,"mat-paginator",21),e.qZA()()()),2&s&&(e.xp6(9),e.Q6J("appFieldPermissions","description"),e.xp6(4),e.Q6J("ngIf",a.isLoadingResults||a.isRateLimitReached),e.xp6(2),e.Q6J("dataSource",a.data),e.xp6(7),e.Q6J("matHeaderRowDef",a.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",a.displayedColumns),e.xp6(1),e.Q6J("length",a.resultsLength)("pageSize",1)("pageSizeOptions",e.DdM(8,w)))},dependencies:[g.O5,x.KE,A.Nt,l.a8,l.dn,l.$j,l.n5,u.Hw,c.Ou,y.NW,h.YE,h.nU,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,F.S,g.uU],styles:[".example-container[_ngcontent-%COMP%]{position:relative;min-height:200px}.example-table-container[_ngcontent-%COMP%]{position:relative;max-height:400px;overflow:auto}.example-loading-shade[_ngcontent-%COMP%]{position:absolute;inset:0 0 56px;background:rgba(0,0,0,.15);z-index:1;display:flex;align-items:center;justify-content:center}.example-rate-limit-reached[_ngcontent-%COMP%]{color:#980000;max-width:360px;text-align:center}.mat-column-number[_ngcontent-%COMP%], .mat-column-state[_ngcontent-%COMP%]{max-width:64px}.mat-column-created[_ngcontent-%COMP%]{max-width:124px}"]}),n})()}];let Q=(()=>{var t;class n{}return(t=n).\u0275fac=function(s){return new(s||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[C.Bz.forChild(b),C.Bz]}),n})();var j=i(2898),O=i(6223),z=i(2524),B=i(6208);let J=(()=>{var t;class n{}return(t=n).\u0275fac=function(s){return new(s||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({providers:[d],imports:[g.ez,Q,j.q,O.u5,O.UX,z.D,B.m]}),n})()},9309:(T,R,i)=>{i.d(R,{S:()=>Z});var g=i(8645),C=i(9773),y=i(7398),h=i(4221);const e=(0,h.ZF)("permissions"),f=(0,h.P1)(e,d=>d.permissions);var r=i(5879);let Z=(()=>{var d;class x{set appFieldPermissions(l){this.permissions$.pipe((0,C.R)(this.destroy$),(0,y.U)(u=>{const c=u?.permissions?.fields[l];c?this.setFieldVisibilityAndEditability(c.canRead,c.canWrite):this.hideAndMakeReadonly()}))}constructor(l,u,c){this.el=l,this.renderer=u,this.store=c,this.permissions$=this.store.select(f),this.destroy$=new g.x}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}hideAndMakeReadonly(){this.renderer.addClass(this.el.nativeElement,"hidden"),this.renderer.addClass(this.el.nativeElement,"readonly")}setFieldVisibilityAndEditability(l,u){const c=this.el.nativeElement;l?this.renderer.removeClass(c,"hidden"):this.renderer.addClass(c,"hidden"),u?this.renderer.removeClass(this.el.nativeElement,"readonly"):(this.renderer.addClass(this.el.nativeElement,"readonly"),this.renderer.setStyle(this.el.nativeElement,"background-color","#f5f5f5"))}}return(d=x).\u0275fac=function(l){return new(l||d)(r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(h.yh))},d.\u0275dir=r.lG2({type:d,selectors:[["","appFieldPermissions",""]],inputs:{appFieldPermissions:"appFieldPermissions"}}),x})()}}]);