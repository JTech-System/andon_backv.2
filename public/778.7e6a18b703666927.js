"use strict";(self.webpackChunkandon_frontend=self.webpackChunkandon_frontend||[]).push([[778],{3778:(ve,S,r)=>{r.r(S),r.d(S,{PermissionsModule:()=>ge});var f=r(6814),_=r(1303),p=r(5861),c=r(6223),u=r(6510),x=function(t){return t.CANREAD="canRead",t.CANWRITE="canWrite",t.CANACCESS="canAccess",t.CANVIEW="canView",t.CANDELETE="canDelete",t.CANUPDATE="canUpdate",t.CANCREATE="canCreate",t.CANCLICK="canClick",t.CANMODIFY="canModify",t.CANEXUCUTE="canExecute",t.CANDOWNLOAD="canDownload",t.CANUPLOAD="canUpload",t}(x||{});const U=Object.values(x);var e=r(5879),D=r(7278);let P=(()=>{var t;class s{constructor(i){this.http=i}create(i){var n=this;return(0,p.Z)(function*(){return yield n.http.post(u.S.PERMISSIONS.BASE_ENDPOINT,i)})()}findAllFilters(i,n,a,l,m){var v=this;return(0,p.Z)(function*(){const Z=u.S.PERMISSIONS.FILTERS(i,n,a,l,m);return yield v.http.get(Z)})()}delete(i){var n=this;return(0,p.Z)(function*(){yield n.http.delete(u.S.PERMISSIONS.BY_ID(i))})()}findOne(i){var n=this;return(0,p.Z)(function*(){const a=u.S.PERMISSIONS.BY_ID(i);return yield n.http.get(a)})()}updatePermission(i,n){var a=this;return(0,p.Z)(function*(){return yield a.http.put(u.S.PERMISSIONS.BY_ID(i),n)})()}}return(t=s).\u0275fac=function(i){return new(i||t)(e.LFG(D.v))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),s})();var O=r(3680),T=r(8034),h=r(5683),N=r(2032),w=r(8525),g=r(5195),y=r(4104),R=r(2296),E=r(300);function Y(t,s){1&t&&(e.TgZ(0,"div",28),e._uU(1," Name is required. "),e.qZA())}function F(t,s){if(1&t&&(e.TgZ(0,"mat-hint",26),e.YNc(1,Y,2,0,"div",27),e.qZA()),2&t){const o=e.oxw();e.xp6(1),e.Q6J("ngIf",o.f.name.errors&&o.f.name.errors.required)}}function q(t,s){if(1&t&&(e.TgZ(0,"mat-option",29),e._uU(1),e.qZA()),2&t){const o=s.$implicit;e.Q6J("value",o),e.xp6(1),e.hij(" ",o," ")}}function J(t,s){1&t&&(e.TgZ(0,"div",28),e._uU(1," Action is required. "),e.qZA())}function M(t,s){if(1&t&&(e.TgZ(0,"mat-hint",26),e.YNc(1,J,2,0,"div",27),e.qZA()),2&t){const o=e.oxw();e.xp6(1),e.Q6J("ngIf",o.f.action.errors&&o.f.action.errors.required)}}function Q(t,s){if(1&t){const o=e.EpF();e.TgZ(0,"mat-card",0)(1,"mat-tab-group",30)(2,"mat-tab",31)(3,"mat-card-content")(4,"div",32)(5,"div",33)(6,"app-m2m",34),e.NdJ("relationshipChanged",function(n){e.CHM(o);const a=e.oxw();return e.KtG(a.onChanged(n))}),e.qZA()()()()()()()}if(2&t){const o=e.oxw();e.xp6(6),e.Q6J("m2mData",o.m2mResources)}}let L=(()=>{var t;class s{constructor(i,n,a,l){var m=this;this._formBuilder=i,this.permissionsService=n,this.route=a,this.router=l,this.resourcesIds=[],this.permissions=[],this.createdOn=new Date,this.permission_id="",this.newRecord=!0,this.failed=!1,this.PermissionActions=U,this.permissionForm=this._formBuilder.group({name:["",[c.kI.required,c.kI.minLength(4)]],action:["",[c.kI.required]]}),this.route.queryParams.subscribe(function(){var v=(0,p.Z)(function*(Z){m.permission_id=Z.id,m.permission_id&&(m.permission=yield m.permissionsService.findOne(m.permission_id),m.permission&&(m.createdOn=new Date(m.permission.createdOn),m.permissionForm.patchValue(m.permission),m.resourcesIds=m.permission.resources.map(C=>C.id),m.resources=m.permission.resources.map(C=>({parent:m.permission.id,relation:C.name,relation_id:C.id})),m.setM2MData(),m.newRecord=!1))});return function(Z){return v.apply(this,arguments)}}())}setM2MData(){this.m2mResources={title:"Recursos",titleSingle:"Recurso",parent:this.permission.id,parent_table:"permissions",relation:"resources",rel_primary_col:"name",relation_endpoint:u.S.RESOURCES.BASE_ENDPOINT,display_cols:["name"],updateRelationEndpoint:u.S.PERMISSIONS.UPDATE_RESOURCES,data:this.resources}}ngOnInit(){return(0,p.Z)(function*(){})()}get f(){return this.permissionForm.controls}onSubmit(){var i=this;return(0,p.Z)(function*(){i.permissionForm.invalid?i.failed=!0:(i.permission=i.permission_id&&!i.newRecord?yield i.permissionsService.updatePermission(i.permission.id,i.permissionForm.value):yield i.permissionsService.create(i.permissionForm.value),i.permission&&(i.failed=!1,i.router.navigate(["/permissions"])))})()}onChanged(i){}}return(t=s).\u0275fac=function(i){return new(i||t)(e.Y36(c.qu),e.Y36(P),e.Y36(_.gz),e.Y36(_.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-permission"]],decls:43,vars:13,consts:[[1,"cardWithShadow","theme-card"],[1,"w-100","row","justify-content-end"],[1,"col-8"],[1,"m-10"],[1,"col-4","justify-content-end"],[1,"col-4","justify-content-end","img-bg-group-icon"],[1,"b-t-1"],[3,"formGroup"],[1,"row","m-t-20","justify-content-start","m-l-20"],[1,"col-sm-5"],[1,"mat-subtitle-2","f-w-600","m-b-8","d-block"],["appearance","outline","color","primary",1,"w-100"],["matInput","","type","text","placeholder","Incidents Routes","formControlName","name"],["class","m-b-16 error-msg",4,"ngIf"],["appearance","outline",1,"w-100"],["matInput","","placeholder","MM/DD/AAAA","disabled","",3,"matDatepicker","value"],["matIconSuffix","",3,"for"],["picker",""],["appearance","outline",1,"w-100","hide-hint"],["formControlName","action"],["value","","selected",""],["selected","",3,"value",4,"ngFor","ngForOf"],["class","cardWithShadow theme-card",4,"ngIf"],[1,"m-t-12","text-right"],["mat-flat-button","","color","accent",1,"m-2"],["type","submit","mat-flat-button","","color","primary",1,"m-2",3,"click"],[1,"m-b-16","error-msg"],["class","text-error",4,"ngIf"],[1,"text-error"],["selected","",3,"value"],["mat-stretch-tabs","false","mat-align-tabs","start","animationDuration","0ms"],["label","Resources"],[1,"row"],[1,"col-12"],[3,"m2mData","relationshipChanged"]],template:function(i,n){if(1&i&&(e.TgZ(0,"mat-card",0)(1,"mat-card-header",1)(2,"div",2)(3,"mat-card-title",3),e._uU(4),e.qZA()(),e._UZ(5,"div",4),e.qZA(),e._UZ(6,"div",5),e.TgZ(7,"mat-card-content",6)(8,"form",7)(9,"div",8)(10,"div",9)(11,"mat-label",10),e._uU(12,"Nombre"),e.TgZ(13,"span"),e._uU(14,"*"),e.qZA()(),e.TgZ(15,"mat-form-field",11),e._UZ(16,"input",12),e.YNc(17,F,2,1,"mat-hint",13),e.qZA()(),e.TgZ(18,"div",9)(19,"mat-label",10),e._uU(20,"Creado"),e.qZA(),e.TgZ(21,"mat-form-field",14),e._UZ(22,"input",15)(23,"mat-datepicker-toggle",16)(24,"mat-datepicker",null,17),e.qZA()(),e.TgZ(26,"div",9)(27,"mat-label"),e._uU(28,"Accion"),e.TgZ(29,"span"),e._uU(30,"*"),e.qZA()(),e.TgZ(31,"mat-form-field",18)(32,"mat-select",19)(33,"mat-option",20),e._uU(34,"-- None -- "),e.qZA(),e.YNc(35,q,2,2,"mat-option",21),e.qZA(),e.YNc(36,M,2,1,"mat-hint",13),e.qZA()()(),e.YNc(37,Q,7,1,"mat-card",22),e.TgZ(38,"div",23)(39,"button",24),e._uU(40,"Cancel"),e.qZA(),e.TgZ(41,"button",25),e.NdJ("click",function(){return n.onSubmit()}),e._uU(42," Submit "),e.qZA()()()()()),2&i){const a=e.MAs(25);let l,m;e.xp6(4),e.Oqu(n.newRecord?"Crear Nuevo":n.permission.name),e.xp6(4),e.Q6J("formGroup",n.permissionForm),e.xp6(5),e.ekj("text-error",null==(l=n.permissionForm.get("name"))?null:l.hasError("required")),e.xp6(4),e.Q6J("ngIf",n.f.name.touched&&n.f.name.invalid||n.failed),e.xp6(5),e.Q6J("matDatepicker",a)("value",n.createdOn),e.xp6(1),e.Q6J("for",a),e.xp6(6),e.ekj("text-error",null==(m=n.permissionForm.get("name"))?null:m.hasError("required")),e.xp6(6),e.Q6J("ngForOf",n.PermissionActions),e.xp6(1),e.Q6J("ngIf",n.f.action.touched&&n.f.action.invalid||n.failed),e.xp6(1),e.Q6J("ngIf",!n.newRecord)}},dependencies:[f.sg,f.O5,O.ey,T.Mq,T.hl,T.nW,h.KE,h.hX,h.bx,h.R9,N.Nt,w.gD,g.a8,g.dn,g.dk,g.n5,y.uX,y.SP,R.lW,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,E.I]}),s})();var I=r(1476),A=r(3566),b=r(2557),j=r(617),B=r(5940),d=r(5313);function k(t,s){1&t&&e._UZ(0,"mat-spinner")}function z(t,s){1&t&&(e.TgZ(0,"div",42),e._uU(1," Andon's API rate limit has been reached. It will be reset in one minute. "),e.qZA())}function W(t,s){if(1&t&&(e.TgZ(0,"div",39),e.YNc(1,k,1,0,"mat-spinner",40),e.YNc(2,z,2,0,"div",41),e.qZA()),2&t){const o=e.oxw();e.xp6(1),e.Q6J("ngIf",o.isLoadingResults),e.xp6(1),e.Q6J("ngIf",o.isRateLimitReached)}}function G(t,s){1&t&&(e.TgZ(0,"th",43),e._uU(1," Nombre "),e.qZA())}function H(t,s){if(1&t&&(e.TgZ(0,"td",44),e._uU(1),e.qZA()),2&t){const o=s.$implicit;e.xp6(1),e.hij(" ",o.name.slice(0,50)," ")}}function $(t,s){1&t&&(e.TgZ(0,"th",43),e._uU(1," Acci\xf3n "),e.qZA())}function X(t,s){if(1&t&&(e.TgZ(0,"td",44),e._uU(1),e.qZA()),2&t){const o=s.$implicit;e.xp6(1),e.hij(" ",o.action," ")}}function K(t,s){1&t&&(e.TgZ(0,"th",45),e._uU(1," Resources "),e.qZA())}function V(t,s){if(1&t&&(e.TgZ(0,"mat-chip-option",49),e._uU(1),e.qZA()),2&t){const o=s.$implicit;e.xp6(1),e.hij(" ",o.name," ")}}function ee(t,s){if(1&t&&(e.TgZ(0,"td",46)(1,"mat-chip-listbox",47),e.YNc(2,V,2,1,"mat-chip-option",48),e.qZA()()),2&t){const o=s.$implicit;e.xp6(2),e.Q6J("ngForOf",o.resources)}}function te(t,s){1&t&&(e.TgZ(0,"th",50),e._uU(1," Created "),e.qZA())}function ie(t,s){if(1&t&&(e.TgZ(0,"td",51)(1,"div",52)(2,"mat-icon",53),e._uU(3,"calendar_today"),e.qZA(),e._uU(4),e.ALo(5,"date"),e.qZA()()),2&t){const o=s.$implicit;e.xp6(4),e.hij(" ",e.lcZ(5,1,o.createdOn)," ")}}function ne(t,s){1&t&&(e.TgZ(0,"th",45),e._uU(1," Action "),e.qZA())}const se=function(){return["/permissions/permission"]},oe=function(t){return{id:t}};function re(t,s){if(1&t){const o=e.EpF();e.TgZ(0,"td",54)(1,"a",55)(2,"mat-icon"),e._uU(3,"edit"),e.qZA()(),e.TgZ(4,"a",56),e.NdJ("click",function(){const a=e.CHM(o).$implicit,l=e.oxw();return e.KtG(l.remove(a.id))}),e.TgZ(5,"mat-icon"),e._uU(6,"delete"),e.qZA()()()}if(2&t){const o=s.$implicit;e.xp6(1),e.Q6J("routerLink",e.DdM(2,se))("queryParams",e.VKq(3,oe,o.id))}}function ae(t,s){1&t&&e._UZ(0,"tr",57)}function me(t,s){1&t&&e._UZ(0,"tr",58)}const ce=function(){return["/","permissions","permission"]},le=function(){return[25,50,100]},pe=[{path:"",component:(()=>{var t;class s{constructor(i){this.permissionsService=i,this.displayedColumns=["createdOn","name","actions","action"],this.permissions=[],this.resultsLength=0,this.isLoadingResults=!0,this.isRateLimitReached=!1,this.paginator=Object.create(null),this.sort=Object.create(null)}ngAfterViewInit(){var i=this;return(0,p.Z)(function*(){i.loadPermissions(),i.sort.sortChange.subscribe(()=>{i.paginator.pageIndex=0,i.loadPermissions()}),i.paginator.page.subscribe(()=>i.loadPermissions())})()}loadPermissions(i=""){const n=this.paginator.pageIndex*this.paginator.pageSize,a=this.paginator.pageSize,l=this.sort.active,m=this.sort.direction;this.isLoadingResults=!0,this.permissionsService.findAllFilters(n,a,l,m,i).then(v=>{this.permissions=v.rows,this.resultsLength=v.row_count,this.isLoadingResults=!1,this.isRateLimitReached=!1}).catch(()=>{this.isLoadingResults=!1,this.isRateLimitReached=!0,this.permissions=[]})}applyFilter(i){this.loadPermissions(i.target.value)}remove(i){var n=this;return(0,p.Z)(function*(){yield n.permissionsService.delete(i),n.permissions=n.permissions.filter(a=>a.id!==i)})()}}return(t=s).\u0275fac=function(i){return new(i||t)(e.Y36(P))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-permissions"]],viewQuery:function(i,n){if(1&i&&(e.Gf(I.NW,5),e.Gf(A.YE,5)),2&i){let a;e.iGM(a=e.CRH())&&(n.paginator=a.first),e.iGM(a=e.CRH())&&(n.sort=a.first)}},decls:47,vars:10,consts:[[1,"bg-light-primary","rounded","p-y-7","p-x-24","m-b-20","overflow-hidden"],[1,"row"],[1,"col-sm-12"],["aria-label","breadcrumb",1,"m-5"],[1,"breadcrumb","mb-0"],[1,"breadcrumb-item","page-title","m-0","f-s-14","p-t-4","f-w-600","m-b-5"],[1,"breadcrumb-item","active","m-0","f-s-14","p-t-4","f-w-600","m-b-5"],[1,"col-4","justify-content-end","img-bg-permissions-icon"],[1,"cardWithShadow"],[1,"p-24"],[1,"row","justify-content-between"],[1,"col-lg-4"],[1,"text-2xl","font-bold"],["appearance","outline",1,"w-100","hide-hint"],["matInput","","placeholder","Buscar",3,"keyup"],["matSuffix",""],["name","search",1,"icon-20"],[1,"col-lg-4","justify-content-end"],[1,"row","justify-content-end","m-b-6"],["mat-raised-button","","color","primary",3,"routerLink"],[1,"example-container","m-t-30"],["class","example-loading-shade",4,"ngIf"],[1,"example-table-container","responsive-table"],["mat-table","","matSort","","matSortActive","createdOn","matSortDisableClear","","matSortDirection","desc",1,"example-table",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","","class","f-w-600 mat-subtitle-1 f-s-16",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","actions"],["matColumnDef","resources"],["mat-header-cell","","class","f-s-16 f-w-600",4,"matHeaderCellDef"],["mat-cell","","class","f-s-14",4,"matCellDef"],["matColumnDef","createdOn"],["mat-header-cell","","mat-sort-header","","disableClear","","class","f-w-600 mat-subtitle-1 f-s-16 p-l-0",4,"matHeaderCellDef"],["mat-cell","","class","p-l-0",4,"matCellDef"],["matColumnDef","action"],["mat-cell","","class","action-link",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions"],[1,"example-loading-shade"],[4,"ngIf"],["class","example-rate-limit-reached",4,"ngIf"],[1,"example-rate-limit-reached"],["mat-header-cell","","mat-sort-header","",1,"f-w-600","mat-subtitle-1","f-s-16"],["mat-cell",""],["mat-header-cell","",1,"f-s-16","f-w-600"],["mat-cell","",1,"f-s-14"],["aria-label","Fish selection"],["class","f-s-14","color","",4,"ngFor","ngForOf"],["color","",1,"f-s-14"],["mat-header-cell","","mat-sort-header","","disableClear","",1,"f-w-600","mat-subtitle-1","f-s-16","p-l-0"],["mat-cell","",1,"p-l-0"],[1,"d-flex","align-items-center","gap-8"],[1,"text-sm"],["mat-cell","",1,"action-link"],[1,"m-r-10","cursor-pointer",3,"routerLink","queryParams"],[1,"m-r-10","cursor-pointer",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(i,n){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"nav",3)(4,"ol",4)(5,"li",5),e._uU(6," Seguridad "),e.qZA(),e.TgZ(7,"li",6),e._uU(8," Permisos "),e.qZA()()()()(),e._UZ(9,"i",7),e.qZA(),e.TgZ(10,"mat-card",8)(11,"mat-card-content",9)(12,"div",10)(13,"div",11)(14,"h1",12),e._uU(15,"Permisos"),e.qZA(),e.TgZ(16,"mat-form-field",13)(17,"input",14),e.NdJ("keyup",function(l){return n.applyFilter(l)}),e.qZA(),e.TgZ(18,"mat-icon",15)(19,"mat-icon",16),e._uU(20,"search"),e.qZA()()()(),e.TgZ(21,"div",17)(22,"div",18)(23,"button",19),e._uU(24," Crear Permiso "),e.qZA()()()(),e.TgZ(25,"div",20),e.YNc(26,W,3,2,"div",21),e.TgZ(27,"div",22)(28,"table",23),e.ynx(29,24),e.YNc(30,G,2,0,"th",25),e.YNc(31,H,2,1,"td",26),e.BQk(),e.ynx(32,27),e.YNc(33,$,2,0,"th",25),e.YNc(34,X,2,1,"td",26),e.BQk(),e.ynx(35,28),e.YNc(36,K,2,0,"th",29),e.YNc(37,ee,3,1,"td",30),e.BQk(),e.ynx(38,31),e.YNc(39,te,2,0,"th",32),e.YNc(40,ie,6,3,"td",33),e.BQk(),e.ynx(41,34),e.YNc(42,ne,2,0,"th",29),e.YNc(43,re,7,5,"td",35),e.BQk(),e.YNc(44,ae,1,0,"tr",36),e.YNc(45,me,1,0,"tr",37),e.qZA()(),e._UZ(46,"mat-paginator",38),e.qZA()()()),2&i&&(e.xp6(23),e.Q6J("routerLink",e.DdM(8,ce)),e.xp6(3),e.Q6J("ngIf",n.isLoadingResults||n.isRateLimitReached),e.xp6(2),e.Q6J("dataSource",n.permissions),e.xp6(16),e.Q6J("matHeaderRowDef",n.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",n.displayedColumns),e.xp6(1),e.Q6J("length",n.resultsLength)("pageSize",10)("pageSizeOptions",e.DdM(9,le)))},dependencies:[f.sg,f.O5,_.rH,h.KE,h.R9,N.Nt,g.a8,g.dn,R.lW,b.z2,b.iO,j.Hw,B.Ou,I.NW,A.YE,A.nU,d.BZ,d.fO,d.as,d.w1,d.Dz,d.nj,d.ge,d.ev,d.XQ,d.Gk,f.uU]}),s})()},{path:"permission",component:L}];let de=(()=>{var t;class s{}return(t=s).\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[_.Bz.forChild(pe),_.Bz]}),s})();var ue=r(6208),fe=r(1186),he=r(3535);let ge=(()=>{var t;class s{}return(t=s).\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({providers:[he.q],imports:[f.ez,de,fe.q,c.u5,c.UX,ue.m]}),s})()}}]);