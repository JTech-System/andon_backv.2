"use strict";(self.webpackChunkandon_frontend=self.webpackChunkandon_frontend||[]).push([[446],{2446:(w,d,e)=>{e.r(d),e.d(d,{AuthModule:()=>x});var p=e(6814),l=e(6099),v=e(5861),r=e(6223),t=e(5879),I=e(3535),g=e(3476),Z=e(2939),c=e(4170),y=e(2032),m=e(5195),f=e(2296),A=e(617);const T=function(){return["/","public","incidents","create"]},C=[{path:"log-in",component:(()=>{var o;class a{constructor(n,s,i,U){this.permissionsService=n,this.authService=s,this.matSnackBar=i,this.router=U,this.hide=!0,this.logInForm=new r.cw({username:new r.NI("",[r.kI.required,o=>/^[a-z][a-z.]*$/.test(o.value)?null:{lowercaseAndDotOnly:{value:o.value}}]),password:new r.NI("",[r.kI.required])})}logIn(){var n=this;return(0,v.Z)(function*(){if(n.logInForm.valid){const s=n.logInForm.value;try{const i=yield n.authService.logIn({username:s.username,password:s.password});localStorage.setItem("token",i.token),localStorage.setItem("user",JSON.stringify(i.user)),localStorage.setItem("permissions",JSON.stringify(i.permissions)),n.permissionsService.loadPermissions(),n.router.navigate(["/"])}catch(i){i.status&&401==i.status?n.matSnackBar.open("Usuario o Contrase\xf1a incorrecto.",void 0,{horizontalPosition:"end",verticalPosition:"bottom",duration:2e3}):500!=i.status&&n.matSnackBar.open("Servidor no encontrado",void 0,{horizontalPosition:"end",verticalPosition:"bottom"})}}})()}logInGuest(){}userId(n){throw new Error("Method not implemented.")}}return(o=a).\u0275fac=function(n){return new(n||o)(t.Y36(I.q),t.Y36(g.e),t.Y36(Z.ux),t.Y36(l.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-log-in"]],decls:35,vars:6,consts:[[1,"log-in","flex","flex-col","items-center","justify-center","w-full","h-screen","px-4"],[1,"max-w-xl","w-full","!shadow-md","border-none"],[1,"p-3"],[1,"flex","flex-col","justify-center","items-center","w-100"],["src","/assets/images/logo.png",1,"logo","mb-10","rounded-md","w-1/2"],[1,"text-3xl","w-full","text-center","font-light"],[3,"formGroup","submit"],["appearance","outline",1,"w-full"],["matInput","","formControlName","username"],["matInput","","formControlName","password",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],["align","end"],["mat-flat-button","","color","primary","type","submit",3,"disabled"],["mat-raised-button","","color","primary",1,"mt-5",3,"routerLink"],[1,"footer","w-full","p-10","flex","flex-col","items-center"],["src","/assets/images/logo-mc.png",1,"w-40"],[1,"w-full","text-center"],["href","#",1,"cursor-pointer","text-blue-500"]],template:function(n,s){1&n&&(t.TgZ(0,"div",0)(1,"mat-card",1)(2,"mat-card-title",2)(3,"div",3),t._UZ(4,"img",4),t.qZA(),t.TgZ(5,"h1",5),t._uU(6,"Iniciar Sesi\xf3n"),t.qZA()(),t.TgZ(7,"form",6),t.NdJ("submit",function(){return s.logIn()}),t.TgZ(8,"mat-card-content")(9,"p"),t._uU(10,"Id de usuario"),t.qZA(),t.TgZ(11,"mat-form-field",7),t._UZ(12,"input",8),t.TgZ(13,"mat-error"),t._uU(14,"Id de usuario inv\xe1lido"),t.qZA()(),t.TgZ(15,"p"),t._uU(16,"Contrase\xf1a"),t.qZA(),t.TgZ(17,"mat-form-field",7),t._UZ(18,"input",9),t.TgZ(19,"button",10),t.NdJ("click",function(){return s.hide=!s.hide}),t.TgZ(20,"mat-icon"),t._uU(21),t.qZA()(),t.TgZ(22,"mat-error"),t._uU(23,"Contrase\xf1a inv\xe1lida"),t.qZA()()(),t.TgZ(24,"mat-card-actions",11)(25,"button",12),t._uU(26," Iniciar Sesi\xf3n "),t.qZA()()()(),t.TgZ(27,"button",13),t._uU(28," Crear un incidente "),t.qZA()(),t.TgZ(29,"div",14),t._UZ(30,"img",15),t.TgZ(31,"p",16),t._uU(32," Gracias por crecer con Hope Global | 2023 "),t.TgZ(33,"a",17),t._uU(34,"\xa9 MC Ingenier\xeda"),t.qZA()()()),2&n&&(t.xp6(7),t.Q6J("formGroup",s.logInForm),t.xp6(11),t.Q6J("type",s.hide?"password":"text"),t.xp6(3),t.Oqu(s.hide?"visibility_off":"visibility"),t.xp6(4),t.Q6J("disabled",s.logInForm.invalid),t.xp6(2),t.Q6J("routerLink",t.DdM(5,T)))},dependencies:[l.rH,c.KE,c.TO,c.R9,y.Nt,m.a8,m.hq,m.dn,m.n5,f.lW,f.RK,A.Hw,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u],styles:[".log-in[_ngcontent-%COMP%]{background-image:url(/assets/images/bg.jpg);background-size:cover}.logo[_ngcontent-%COMP%]{background-color:#1b202a!important}"]}),a})()}];let S=(()=>{var o;class a{}return(o=a).\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[l.Bz.forChild(C),l.Bz]}),a})();var b=e(1186);let x=(()=>{var o;class a{}return(o=a).\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[g.e],imports:[p.ez,S,b.q,r.u5,r.UX]}),a})()}}]);